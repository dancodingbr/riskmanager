# Risk Manager

Welcome to Risk Manager's wiki.

# Table of Contents

* [Project Management](#project-management)
* [Development Notes](#development-notes)
* [Testing](#testing)
* [Quality](#quality)
* [Meeting Notes](#meeting-notes)
* [Documentation](#documentation)

## <a name="project-management"></a>Project Management

### Roadmap

The goals of this project should follow what it was defined in the main features proposed initially. See [README.md](https://github.com/dancodingbr/riskmanager). Certainly, changes will be applied during future releases when it's necessary.

### Iteration Plans

The iteration plans could contains a set of features or bugfixes to develop. 

By now, there aren't any deadlines defined, but the milestone is marked for a release that is validated and ready for use (in other words, it passed for all Definition of Done's criterias).

At the end of each iteration, we want to have a version of the application that can be used by the users.

This is the list of main features that should be developed, according to [requirements](https://github.com/dancodingbr/riskmanager/blob/main/docs/02_requirements.md) and sorted by the most important:

| Label  | Description  |
|---|---|
| :white_large_square: | not started  |
| :clock4: | doing  |
| :white_check_mark: | done  |

#### Features

:white_check_mark: Analyze the results of a problem solution

:white_large_square: Choose the effective action plans for the problem

:white_large_square: Register tasks to do for each action plan

:white_large_square: Create potential action plans to solve a problem

:white_large_square: Register a problem


### Endgame Plans 

_(description)_


### Retrospectives

_(description)_


## <a name="development-notes"></a>Development Notes

This section describe some general notes and suggestions of conventions that it could be applied to the project. This could be changed and flexible according to the project needs, that means, don't worry if something was overlooked (eg. a poorly crafted comment, a bad pull request, etc). It's not intention of these recommendations to turn the project hard to be worked but to find a way to maintain at least a minimal organization. :wink:

### Workflow

_(image of basic workflow. ex. git flow, trunk based, github flow)_

In this project, we'll use a custom workflow based essentially on Github Flow. It's composed by the following branches:

- **main**
- **development**: it can used to validate the changes made on bugfix or feature branches before rebase with the main branch
- **bugfix**
- **feature**

### Open an Issue (Template)

**Issue _number_**
>
> _Version: vX.Y.Z_
>
> _System Operator:_
>
> _What would you want to do?_
>
> _Steps to reproduce:_
>
> _Expected results:_
>
> _Actual results:_

### Branch Names Style

>_main_
>
>_development_
>
>_feature/feature-name_
>
>_bugfix/bugfix-name_


### Commit Messages Style

Reference: _https://cbea.ms/git-commit/_


### Coding Guidelines

By now, we should follow the coding style defined by the technologies documentation and apply it for this project (for example: the code generated by the framework when you creates a new project, using IDE's linter tools, etc).

### Development Environment

_(Note: This development environment was preparing in Linux operating system (Ubuntu distro). If you're using another like MacOS or Windows, the settings could be different.)_

#### Frontend

**Technologies**

- Web: Angular

**Setting Steps**

1). Install VS Code.

2). Install Node js.

3). Install npm.

4). Install Angular CLI.

5). Import the project as a workspace and open in integrated terminal.

6). Run the application.

```sh
cd frontend/web/riskmanager
ng serve --open
```

7). If you receive a message like this "command not found: ng", run the following commands:

```sh
npm install --save-dev @angular/cli@latest
npm install -g @angular/cli
```


**Testing**

- PrÃ©-Requisites (p.s.: only when running E2E tests)

1). Run the backend application in background.

a. First, open the backend project in Eclipse and run the project like this: Right-click on project, choose the option Run As -> Java Application, in this case "RiskManager Application". In "Arguments" tab, put on "VM Arguments" field the following clause used to select the qa profile:

```sh
-Dspring.profiles.active=qa
```

b. Then click on "Run" button. It will create a temporary H2 database demo (using db.sql to create the schema and demo.sql to populate the database with sample data). The application process will be used to respond the incomming requests to the REST API layer.

2). Run the frontend application in background, opening in a new integrated terminal on VS Code.


- Steps

For E2E tests, run the following command: 

```sh
npx nightwatch
```

For integration and unit tests, run the following command:

```sh
ng test
```


**Building**

In VS Code, open an integrated terminal, on the root project directory (frontend/web/riskmanager/), and run the following command:

```sh
ng build --configuration production
```

At the end of the build process, if the execution ran sucessfully, the output files will be generated on dist directory (for example: dist/riskmanager/) containing html, css, javascript and asset files that will be used to deploy the frontend tier of the application.


**Deploy**

1). Install and start Docker.

2). Open a terminal, go to the root directory of frontend project and run the following commands:

```sh
cd "/riskmanager/frontend/web/riskmanager"
docker build -t dancodingbr/riskmanager-frontend .
docker run -p 8000:80 dancodingbr/riskmanager-frontend
```


**Misc Commands**

- Angular CLI Generate: 

https://angular.io/cli/generate

_Note: Use Angular CLI generate commands to create the artifacts (for example: components, services, classes, interfaces, etc.)_

- Run E2E tests: 

. Nigtwatch CucumberJS Environment

```sh
npx nightwatch --env cucumber-js --format @cucumber/pretty-formatter
```

. Default Nightwatch Environment

```sh
npx nightwatch
```

. Default Angular E2E Environment

```sh
ng e2e
```

- Run Integration and Unit tests:

. Default Karma/Jasmine Environment

```sh
ng test
```

- Updating all dependencies used in the Angular project:

https://www.npmjs.com/package/npm-check-updates



#### Backend

**Technologies**

- Web: Spring Boot

- Database: Postgresql

**Setting Steps**

1). Install openjdk (version: 17 or later).

2). Install Eclipse IDE.

3). Open Eclipse

a. Select as workspace /riskmanager/backend.

b. Import the riskmanager project (/backend/riskmanager) as a Existing Maven project.

4). Install Spring Tools 4 plugin

a. Click on Help > Eclipse Marketplace. In Find field, type "spring".

b. Choose and install "Spring Tools 4".

c. Follow the steps (Next, Next, ... Finish) and wait until the installation ends.

5). Run the application.

**Testing**

1). First, with the project opened in Eclipse, run the application like this: Right-click on project, choose the option Run As -> Java Application, in this case RiskManager Application. By default, a dev profile (application-dev.properties) is selected in pom.xml, when you need to test only the backend tier. 

It will create a temporary H2 database demo (using db.sql to create the schema). The application process will be used to respond the incomming requests to the REST API layer.

2). Keep the application running in background, and now run the tests (right-click on project, choose the option Run As -> JUnit Test). All tests will be runned at once, like integration and unit tests.


**Building**

1). First, with the project opened in Eclipse, run the application like this: Right-click on project, choose the option Run As -> Java Application, in this case RiskManager Application.

This will be necessary to do because the build process will run all tests, including those ones related to the REST API layer.

2). Keep the application running in background, and now run the tests (right-click on project, choose the option Run As -> Run Configurations). In "Maven Build" option, right-click and choose to create a new configuration. Fill the form fields like this:

```sh
Name: build
Goals: clean package
```

Click on "Apply" and then on "Run" button.

At the end of the build process, if the execution ran sucessfully, a JAR file will be generated on target directory (for example: riskmanager-0.0.1-SNAPSHOT.jar). This jar file will be used to deploy the backend tier of the application.


**Deploy**

1). Install and start Docker.

2). Open a terminal, go to the root directory of backend project and run the following commands:

```sh
cd "/riskmanager/backend/riskmanager"
docker build -t dancodingbr/riskmanager-backend .
docker run -p 8080:8080 dancodingbr/riskmanager-backend
```


### Creating a Release

Reference: _https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository_

### Version Format (Release Tags)

> **vX.Y.Z**
> 
> X: Major revision (new features, conceptual changes, etc)
>
> Y: Minor revision (collection of bug fixes or little changes, etc)
>
> Z: Several bug fix identified in production environment

### Notes Template

> **New Features**
> 
> _brief comment of feature A_ #<issue_number>
>
> _brief comment of feature B_ #<issue_number>
>
> 
> **Bug Fixes**
> 
> _brief comment of bug fix A_ #<issue_number>
>
> _brief comment of bug fix B_ #<issue_number>
>
> 
> **Documentation**
> 
> _changes on general docs or artifacts_
>
> 
> **Contributors**
> 
> Thanks all the contributors above for this release:
>
> _<contributor A's github link>_
>
> _<contributor B's github link>_
>


## <a name="testing"></a>Testing

### Levels

- Unit tests
- Integration tests
- System tests
- Acceptance tests

## <a name="quality"></a>Quality

### Definition Of Done

- Tests written and passing
- Cross-browser testing done
- Build passing
- Acceptance criteria met
- Documentation updated

## <a name="meeting-notes"></a>Meeting Notes

### Team Communication

_(chat: Gitter, Discord, Slack, Teams, etc)_

## <a name="documentation"></a>Documentation

_(documents repository, technical tutorials)_


